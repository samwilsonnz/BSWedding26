# üîß WEDDING REGISTRY FIX INSTRUCTIONS

## Problem
Guest management is not working because the Supabase `guests` table doesn't have auto-increment enabled on the `id` column.

## Solution
Run the SQL fix in your Supabase dashboard.

---

## üìã STEP-BY-STEP FIX

### Step 1: Open Supabase Dashboard
1. Go to: https://supabase.com/dashboard/project/ypxbekwomfqfokzfoasz
2. Login if needed

### Step 2: Open SQL Editor
1. Click **"SQL Editor"** in the left sidebar
2. Click **"New Query"** button

### Step 3: Run the Fix
1. Copy and paste this SQL:
```sql
ALTER TABLE guests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;
```

2. Click **"Run"** (or press Cmd/Ctrl + Enter)
3. You should see: **"Success. No rows returned"**

### Step 4: Verify the Fix
1. Run this verification query:
```sql
SELECT column_name, column_default
FROM information_schema.columns
WHERE table_name = 'guests' AND column_name = 'id';
```

2. You should see something like: `nextval('guests_id_seq'::regclass)`
3. This confirms auto-increment is enabled!

### Step 5: Test Guest Addition
1. Go back to your admin panel: http://localhost:3000/admin
2. Login with code: **SB2024ADMIN1**
3. Try adding a guest:
   - Name: Test Guest
   - Email: test@example.com
   - Any other details
4. Click **"Add Guest"**
5. Should work! ‚úÖ

---

## üéâ AFTER THE FIX

Once this is done, you'll be able to:
- ‚úÖ Add new guests
- ‚úÖ Edit existing guests
- ‚úÖ Delete guests
- ‚úÖ Generate QR codes for guests
- ‚úÖ Track guest contributions

---

## üñºÔ∏è BONUS: Dual Photos

To add two photos to a registry item:
1. Click on the **"Primary Photo"** upload area
2. Upload first photo
3. Click on the **"Secondary Photo"** upload area
4. Upload second photo
5. Both photos will be displayed in a collage layout!

---

## ‚ùì TROUBLESHOOTING

### If SQL fix fails:
Try this alternative approach:
```sql
-- Drop the constraint
ALTER TABLE guests ALTER COLUMN id DROP DEFAULT;

-- Add identity
ALTER TABLE guests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;
```

### If still having issues:
The table might need to be recreated. Contact me for help!

---

## üìû SUPPORT

If you need help:
1. Check server logs for error messages
2. Make sure Supabase project is active (not paused)
3. Verify you're using the correct project URL

---

## ‚úÖ CHECKLIST

- [ ] Opened Supabase Dashboard
- [ ] Opened SQL Editor
- [ ] Ran the ALTER TABLE command
- [ ] Verified the fix with SELECT query
- [ ] Tested adding a guest in admin panel
- [ ] Guest added successfully!

---

**Last Updated**: 2025-10-23
**Server Status**: ‚úÖ Running on port 3000
**Admin Code**: SB2024ADMIN1
